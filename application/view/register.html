<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- imports -->
    <link rel="stylesheet" type="text/css" href="./css/standard.css">
    <script type="text/javascript" src="js/navbar.js"></script>
    <script type="text/javascript" src="js/auth.js"></script>
  </head>
<body>

  <!-- Will be populated with the html for the navbar on startup -->
  <div id="navbar-placeholder"></div>

  <div class="container" style="height:40%; min-width: width 300px; text-align: center  ">
    <h1 style="text-align: center; margin:0px">Register</h1>
    <p style="text-align: center; margin:4px">Fill this form to create your account.</p>
    <hr>
     <input type="text" placeholder="Enter UserName" id="username" required><br>
     <input type="text" placeholder="Enter Email" id="email"  required><br>
     <input type="password" placeholder="Enter Password" id="psw"  required><br>
     <input type="password" placeholder="Repeat Password" id="psw-repeat" required><br>
     <input type="checkbox" required> Accept our <a href="/terms">Terms & Privacy policy</a>.
     <br><button style="width:30%;" type="submit" class="registerbtn" onclick="register()">Register</button>
    <hr>
  <a href="/login" style="float: left;margin-left: 20%;">Log In</a>
  <a href="/forgot-password" style="float: right;margin-right: 20%;">Forgot Password?</a>

  </div>


  <script>
    function register() {
      var username = document.getElementById("username").value
      var email = document.getElementById("email").value
      var password = document.getElementById("psw").value
      var passwordRepeat = document.getElementById("psw-repeat").value

      if(username === "")
        alert("Please enter a username")
      else if(email === "")
        alert("Please enter an email")
      else if(password === "")
        alert("Please enter a password")
      else if(passwordRepeat === "")
        alert("Please repeat your password")
      else if(password != passwordRepeat)
        alert("The passwords do not match. Please re-enter your password")

      if(username === "" || email === "" || password === "" || passwordRepeat === "" || password != passwordRepeat)
        return

      var xmlReq = new XMLHttpRequest();

      xmlReq.onload = function() {
        if (xmlReq.status == 200)
          window.location.href =  "/"
        else
          alert(xmlReq.response)
      }

      var params = '?username=' + username + '&email=' + email + '&password=' + password

      xmlReq.open('POST', '/requestRegister' + params, true)
      xmlReq.send(null)
    }
  </script>

</body>
</html>

<!-- imports -->
<script type="text/javascript">
    loadNavbar();
</script>